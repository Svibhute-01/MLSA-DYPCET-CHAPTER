<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap & Tailwind -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      prefix: 'tw-',
      corePlugins: { preflight: false },
      theme: {
        extend: {
          colors: {
            brand: '#00ff88',
            accent: '#00e5ff',
            bg: '#0a0f1c'
          },
          boxShadow: {
            neon: '0 0 0.5rem rgba(0,255,136,0.7),0 0 1.25rem rgba(0,229,255,0.4)'
          }
        }
      }
    }
  </script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <title>Manage Event Registrations</title>

  <style>
    body {
      background: #0a0f1c;
      color: white;
      font-family: 'JetBrains Mono', monospace;
    }
    .card {
      background: rgba(14,21,48,0.75);
      border: 1px solid rgba(0,229,255,0.25);
      border-radius: 14px;
      box-shadow: 0 0 0.5rem rgba(0,255,136,0.6);
    }
    .table th {
      color: #00e5ff;
      font-weight: 600;
    }
    .table td {
      vertical-align: middle;
      color: #e5e7eb;
    }
    .badge-active {
      background: rgba(0,255,136,0.15);
      color: #00ff88;
    }
    .badge-inactive {
      background: rgba(255,0,0,0.15);
      color: #ff6b6b;
    }
  </style>
</head>

<body>

<div class="container tw-py-10">

  <!-- Header -->
  <div class="tw-flex tw-justify-between tw-items-center tw-mb-6">
    <h2 class="tw-text-2xl tw-font-bold tw-text-white">
      <i class="fa-solid fa-clipboard-list tw-text-brand me-2"></i>
      Manage Event Registrations
    </h2>

    <a href="/admin/event-registration/new" class="btn btn-success">
      <i class="fa-solid fa-plus me-1"></i> Add Registration
    </a>
  </div>

  <!-- Table Card -->
  <div class="card p-4">
    <% if (registrations.length === 0) { %>
      <p class="text-center text-muted mb-0">
        No event registrations added yet.
      </p>
    <% } else { %>

    <div class="table-responsive">
      <table class="table table-borderless align-middle">
        <thead>
          <tr>
            <th>Poster</th>
            <th>Event Title</th>
            <th>Date</th>
            <th>Form Link</th>
            <th>Status</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>

        <tbody>
          <% registrations.forEach(event => { %>
            <tr>
              <!-- Poster -->
              <td>
                <% if (event.poster_url) { %>
                  <img src="<%= event.poster_url %>" 
                       alt="Poster" 
                       class="rounded"
                       style="height:60px; width:auto;">
                <% } else { %>
                  <span class="text-muted">No Image</span>
                <% } %>
              </td>

              <!-- Title -->
              <td>
                <strong class="tw-text-white"><%= event.title %></strong>
              </td>

              <!-- Date -->
              <td>
                <i class="fa-regular fa-calendar tw-text-accent me-1"></i>
                <%= new Date(event.date).toDateString() %>
              </td>

              <!-- Google Form -->
              <td>
                <a href="<%= event.form_link %>" target="_blank" class="tw-text-accent">
                  Open Form
                </a>
              </td>

              <!-- Status -->
              <td>
                <% if (event.is_active) { %>
                  <span class="badge badge-active">Active</span>
                <% } else { %>
                  <span class="badge badge-inactive">Inactive</span>
                <% } %>
              </td>

              <!-- Actions -->
              <td class="text-end">
                <a href="/admin/event-registration/edit/<%= event.id %>" 
                   class="btn btn-sm btn-outline-info me-1">
                  <i class="fa-solid fa-pen"></i>
                </a>

                <form action="/admin/event-registration/delete/<%= event.id %>" 
                      method="POST" 
                      class="d-inline"
                      onsubmit="return confirm('Delete this registration?')">
                  <button class="btn btn-sm btn-outline-danger">
                    <i class="fa-solid fa-trash"></i>
                  </button>
                </form>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>

    <% } %>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
